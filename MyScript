#!
#PROGRAMM FILE: MyScript
#PROGRAMMER: Abbasguliev Rolan
param1=$1
param2=$2
param3=$3
param4=$4

# COLORS # 
RED='\033[1;31m'
LBLUE='\033[1;34m'
WHITE='\033[1;37m'
YELLOW='\033[1;33m'
ORANGE='\033[0;33m'
NC='\033[0m'


calc()
{
  case $param2 in 
    sum)
         echo "RESULT: $(( param3 + param4 ))"
         ;;
    sub)
         echo "RESULT: $(( param3 - param4 ))"
         ;;
    mul) 
         echo "RESULT: $(( param3 * param4 ))"
         ;;
    div)			 	
         echo "RESULT: $(( param3 / param4 ))"
         ;;
      *)
         echo -e "${RED}CALC FUNCTION ERROR${NC}" 
         exit 1
         ;; 
    esac	
}

search() 
{
  local file_name=$param2
  local pattern=$param3 
  grep -r $pattern $file_name 
}

reverse()
{
  local file_f=$param2
  local file_s=$param3
  
  readarray arr < SearchMe/$file_f
  for ((i=${#arr[*]}; i >= 0; i--))
  do
    echo ${arr[$i]} >> SearchMe/$file_s
  done
}

strlen()
{
  echo | awk -v str="$param2" '{ print "String: " str }
                  			   { print "RESULT: " length(str)}'
}

log()
{
  sed -n 's/(WW)/Warnings/gw war' /var/log/anaconda/X.log
  sed -n 's/(II)/Information/gw info' /var/log/anaconda/X.log
  cat info >> war  
  rm info
 # tail -f war | GREP_COLOR='01;36' egrep --color=always 'Warnings|$'
  GREP_COLOR="1;33" grep --color="always" "Warnings" war >> color  
  GREP_COLOR="1;34" grep --color="always" "Information" war >> color
  rm war  && head -n 5 color && tail -n 5 color && rm color 
 # echo "Warnings" | awk '{ gsub("Warnings", "\033[1;33m&\033[0m"); print }'
}

help()
{
   echo -e "
                                         ${WHITE}MANUAL${NC}
        ${YELLOW}=============================================================================${NC}
        ${LBLUE}calc${NC}    - sum/sub/mul/dib [num1] [num2] ${ORANGE}/* calculating numbers             */${NC}

        ${LBLUE}search${NC}  - [dir_name]  [reg_expresion]   ${ORANGE}/* search expresion type 
              	                                   in direcroty files              */${NC}   
        ${LBLUE}reverse${NC} - [file_name1] [file_name2]     ${ORANGE}/* reverse copy from   
                                                   file1 -> file2                  */${NC}
        ${LBLUE}strlen${NC}  - [string]                      ${ORANGE}/* string length                   */${NC}
    
        ${LBLUE}log${NC}     - none                          ${ORANGE}/* output line Warnings/Information
                                                   from /var/log/anaconda/X.log
                                                   [first 5, last 5] lines         */ ${NC}
      
        ${LBLUE}exit${NC}    - [return code]                 ${ORANGE}/* exit programm with code         */${NC}   

        ${YELLOW}=============================================================================${NC}
  "
}

interactive()
{
  echo -e "
1 - calc
2 - search
3 - reverse
4 - strlen
5 - log
6 - exit "

}

case $param1 in 
  calc)
    clear		 
    calc
    ;;
  search)
    clear
    search
    ;;
  reverse)
    clear
    reverse 
    ;;
  strlen)
    clear
    strlen 
    ;;
  log) 
    clear
    log 
    ;;
  exit)
    clear
    if [ -z "$param2" ]
    then 
      echo "exit code: 0"
      exit 0
    else
      echo "exit code: $param2"
      exit $param2
    fi  
    ;;
  help)
    clear
    help 
    ;; 
  interactive)
    interactive 
    ;; 
  *)
    clear
    echo -e "${RED}SECOND PARAMETER DOSN'T EXIST/NONE${NC}"
    exit 1
    ;;
esac


