#!
#PROGRAMM FILE: MyScript
#PROGRAMMER: Abbasguliev Rolan
param1=$1
param2=$2
param3=$3
param4=$4

calc()
{
  case $param2 in 
    sum)
         echo "Sum is: $(( param3 + param4 ))"
         ;;
    sub)
         echo "Sub is: $(( param3 - param4 ))"
         ;;
    mul) 
         echo "Mul is: $(( param3 * param4 ))"
         ;;
    div)			 	
         echo "Div is: $(( param3 / param4 ))"
         ;;
      *)
         echo "#Function calc error" 
         exit 1
         ;; 
    esac	
}

search() 
{
  local file_name=$param2
  local pattern=$param3 
  grep -r $pattern $file_name 
}

reverse()
{
  local file_f=$param2
  local file_s=$param3
  
  readarray arr < SearchMe/$file_f
  for ((i=${#arr[*]}; i >= 0; i--))
  do
    echo ${arr[$i]} >> SearchMe/$file_s
  done
}

strlen()
{
 echo | awk -v str="$param2"  '{ print "String: " str } 
                  	       { print "String length:\t" length(str) }'
}

log()
{
  sed -n 's/(WW)/Warnings/gw war' /var/log/anaconda/X.log
  sed -n 's/(II)/Information/gw info' /var/log/anaconda/X.log
  cat info >> war  
  rm info
 # tail -f war | GREP_COLOR='01;36' egrep --color=always 'Warnings|$'
  GREP_COLOR="1;33" grep --color="always" "Warnings" war >> color  
  GREP_COLOR="1;34" grep --color="always" "Information" war >> color
  rm war  
  head -n 10 color
  tail -n 20 color
  rm color 
 # echo "Warnings" | awk '{ gsub("Warnings", "\033[1;33m&\033[0m"); print }'
}

help()
{
  clear
  echo  "
                                         MANUAL
        ======================================================================
        calc    - sum/sub/mul/dib [num1] [num2]  /* calculating numbers     */

        search  - [dir_name]  [reg_expresion]    /* search expresion type 
                                                    in direcroty files      */   
        reverse - [file_name1] [file_name2]      /* reverse copy from   
                                                     file1 -> file2         */
        strlen  -  string                        /* string length           */
    
        log     -   
      
        exit    -  [return code]                 /* exit programm with code */   

        ======================================================================
  "
}

case $param1 in 
  calc)		 
    calc
    ;;
  search)
    search
    ;;
  reverse)
    reverse 
    ;;
  strlen)
    strlen 
    ;;
  log) 
    log 
    ;;
  exit)
    if [ -z "$param2" ]
    then 
      echo "exit code: 0"
      exit 0
    else
      echo "exit code: $param2"
      exit $param2
    fi  
    ;;
  help)
    help 
    ;;  
  *)
    echo "#Main Loop error"
    exit 1
    ;;
esac


